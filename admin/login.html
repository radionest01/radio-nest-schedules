<!DOCTYPE html>
<html>
<head>
  <title>Login</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>

<div class="login-container">
  <h2>Login</h2>

  <input type="email" id="email" placeholder="Email">
  <input type="password" id="password" placeholder="Password">

  <button onclick="login()">Login</button>

  <a class="forgot" href="#" onclick="resetPassword()">Forgot your password?</a>

  <p id="error"></p>
</div>

<!-- Firebase core -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

<!-- Your Firebase config + logic -->
<script src="firebase.js"></script>

<script>
// Clean, polished login function
function login() {
  const email = document.getElementById("email").value.trim();
  const password = document.getElementById("password").value.trim();
  const errorBox = document.getElementById("error");

  // Reset UI
  errorBox.innerText = "";
  errorBox.classList.remove("show");
  document.getElementById("password").classList.remove("error");

  firebase.auth().signInWithEmailAndPassword(email, password)
    .then(() => {
      window.location.href = "activate.html";
    })
    .catch(error => {
      errorBox.style.color = "red";

      switch (error.code) {
        case "auth/wrong-password":
          errorBox.innerText = "Incorrect password. Please try again.";
          document.getElementById("password").classList.add("error");
          break;

        case "auth/user-not-found":
          errorBox.innerText = "No account found with that email.";
          break;

        case "auth/invalid-email":
          errorBox.innerText = "Please enter a valid email address.";
          break;

        case "auth/too-many-requests":
          errorBox.innerText = "Too many attempts. Please wait and try again.";
          break;

        default:
          errorBox.innerText = "Login failed. Please check your details.";
          break;
      }

      errorBox.classList.add("show");
    });
}

// Password reset
function resetPassword() {
  const email = document.getElementById("email").value.trim();
  const errorBox = document.getElementById("error");

  if (!email) {
    errorBox.style.color = "red";
    errorBox.innerText = "Enter your email first.";
    errorBox.classList.add("show");
    return;
  }

  firebase.auth().sendPasswordResetEmail(email)
    .then(() => {
      errorBox.style.color = "green";
      errorBox.innerText = "Password reset email sent. Check your spam folder if needed.";
      errorBox.classList.add("show");
    })
    .catch(err => {
      errorBox.style.color = "red";
      errorBox.innerText = "Unable to send reset email.";
      errorBox.classList.add("show");
    });
}
</script>

</body>
</html>
